<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üíñ Final Question üíñ</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    *{box-sizing:border-box}
    body{font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;background:linear-gradient(180deg,#fef8fb,#fff);color:#222;padding:32px 24px}
    
    .topbar{max-width:1400px;margin:0 auto 24px;display:flex;align-items:center;gap:12px}
    .back{color:#7b0f2f;text-decoration:none;font-weight:700;font-size:16px;transition:all 0.3s}
    .back:hover{transform:translateX(-2px)}
    
    .content-wrap{max-width:1400px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;gap:40px;align-items:center}
    
    /* Left: Portrait */
    .portrait-section{text-align:center}
    .portrait-container{max-width:400px;margin:0 auto;border-radius:20px;overflow:hidden;box-shadow:0 30px 80px rgba(123,15,47,0.2);background:linear-gradient(135deg,#ffd6e0,#fff6f8)}
    .portrait-container img{width:100%;height:auto;display:block;max-width:380px}
    
    /* Right: Final Question */
    .final-section{background:white;border-radius:16px;padding:40px;box-shadow:0 20px 60px rgba(123,15,47,0.1);border:2px solid #f3e6ea}
    .final-section h1{margin:0 0 8px;font-family:'Playfair Display',serif;color:#7b0f2f;font-size:32px;text-align:center}
    .final-emoji{font-size:28px;text-align:center;margin:0 0 16px}
    .question-text{color:#5a5a5a;font-size:18px;text-align:center;margin:24px 0 32px;line-height:1.6}
    
    .options{display:flex;flex-direction:column;gap:12px}
    .option-btn{padding:16px 20px;border:2px solid #e9dfe4;border-radius:12px;background:white;color:#222;font-weight:600;font-size:16px;cursor:pointer;transition:all 0.3s;text-align:left;font-family:inherit}
    .option-btn:hover{background:#fef8fb;border-color:#c63b6a;transform:translateX(4px);box-shadow:0 4px 12px rgba(198,59,106,0.15)}
    .option-btn:active{transform:translateX(2px)}
    .option-btn.active{background:#c63b6a;color:white;border-color:#c63b6a}
    
    /* Modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:1000}
    .modal.show{display:flex}
    .modal .card{width:480px;padding:32px;border-radius:16px;background:white;text-align:center;box-shadow:0 30px 80px rgba(0,0,0,0.3);max-height:90vh;overflow-y:auto}
    .modal h3{margin:0 0 12px;color:#7b0f2f;font-family:'Playfair Display',serif;font-size:26px}
    .modal p{color:#8a6b7c;margin:8px 0;font-size:15px}
    .modal img{max-width:280px;border-radius:12px;margin:20px 0;max-height:400px;object-fit:contain}
    .close-btn{background:#7b0f2f;color:white;padding:12px 20px;border-radius:8px;border:none;cursor:pointer;font-weight:700;margin-top:16px;transition:all 0.3s}
    .close-btn:hover{background:#a52f55;transform:translateY(-2px)}
    .close-btn:active{transform:translateY(0)}
    
    /* Video Modal */
    .video-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.8);z-index:1001}
    .video-modal.show{display:flex}
    .video-card{width:90%;max-width:800px;background:white;border-radius:16px;overflow:hidden;box-shadow:0 30px 100px rgba(0,0,0,0.5)}
    .video-header{padding:20px;background:#7b0f2f;color:white;font-weight:700;font-size:18px;display:flex;justify-content:space-between;align-items:center}
    .video-close{background:none;border:none;color:white;font-size:24px;cursor:pointer;font-weight:700;transition:all 0.3s}
    .video-close:hover{transform:scale(1.2)}
    .video-frame{width:100%;aspect-ratio:16/9;background:#000}
    video{width:100%;height:100%;display:block}

    /* Flower Bouquet Modal */
    .flower-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.75);z-index:1002;backdrop-filter:blur(2px);overflow-y:auto;padding:16px}
    .flower-modal.show{display:flex;animation:fadeInModal 0.4s ease-out}
    @keyframes fadeInModal{from{opacity:0}to{opacity:1}}
    .flower-container{position:relative;width:520px;height:640px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;animation:bloom 0.8s cubic-bezier(0.34,1.56,0.64,1);background:linear-gradient(135deg, #fff8fc 0%, #fffbfd 100%);border-radius:24px;box-shadow:0 30px 80px rgba(123,15,47,0.25), inset 0 1px 0 rgba(255,255,255,0.8);padding:28px;overflow:hidden;border:2px solid rgba(198,59,106,0.15);margin:auto}
    @keyframes bloom{from{transform:scale(0.3);opacity:0;filter:blur(10px)}to{transform:scale(1);opacity:1;filter:blur(0)}}
    .flower-header{text-align:center;margin-bottom:14px;z-index:20}
    .flower-header-name{font-family:'Playfair Display',serif;font-size:28px;color:#7b0f2f;font-weight:700;margin:0 0 4px;text-shadow:1px 1px 3px rgba(198,59,106,0.1);letter-spacing:0.5px}
    .flower-header-text1{font-family:Poppins,sans-serif;font-size:13px;font-weight:700;background:linear-gradient(135deg, #c63b6a, #e85a8a);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:4px 0;letter-spacing:0.5px}
    .flower-header-text2{font-family:Poppins,sans-serif;font-size:16px;font-weight:800;color:#c63b6a;margin:4px 0 0;letter-spacing:2px;animation:bounce 1.2s ease-in-out infinite}
    @keyframes bounce{0%{transform:translateY(0)}50%{transform:translateY(-5px)}100%{transform:translateY(0)}}
    .flower-stem{position:absolute;bottom:0;width:6px;height:130px;background:linear-gradient(to top, #2d5016, #4a7c2c);border-radius:3px}
    .flower-petals{position:relative;width:300px;height:280px;display:flex;align-items:center;justify-content:center;margin:10px 0}
    .petal-text{position:absolute;font-family:Poppins,sans-serif;font-weight:600;color:white;text-shadow:1px 1px 3px rgba(198,59,106,0.5);font-size:9px;padding:4px 8px;border-radius:12px;background:linear-gradient(135deg, #c63b6a, #e85a8a);animation:pulse 2s ease-in-out infinite;box-shadow:0 2px 8px rgba(198,59,106,0.3)}
    .petal-text.quiz-word{background:linear-gradient(135deg, #ff1493, #ff69b4);font-weight:700;font-size:10px;padding:5px 10px;box-shadow:0 3px 12px rgba(255,20,147,0.5);text-shadow:2px 2px 4px rgba(255,20,147,0.6)}
    @keyframes pulse{0%{transform:scale(1);opacity:0.8}50%{transform:scale(1.08);opacity:1}100%{transform:scale(1);opacity:0.8}}
    .center-heart{position:absolute;width:80px;height:80px;display:flex;align-items:center;justify-content:center;font-size:60px;animation:heartbeat 1.2s ease-in-out infinite;z-index:10}
    @keyframes heartbeat{0%{transform:scale(1)}50%{transform:scale(1.2)}100%{transform:scale(1)}}
    .flower-buttons{position:relative;display:flex;gap:12px;z-index:10;margin-top:12px}
    .accept-btn{background:linear-gradient(135deg, #c63b6a, #e85a8a);color:white;padding:10px 28px;border-radius:10px;border:none;font-weight:700;cursor:pointer;font-size:14px;transition:all 0.3s;box-shadow:0 6px 16px rgba(198,59,106,0.3);font-family:Poppins,sans-serif;letter-spacing:0.3px}
    .accept-btn:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(198,59,106,0.4)}
    .accept-btn:active{transform:translateY(-1px)}
    
    /* Shared Carousel */
    .shared-carousel-wrap{max-width:1400px;margin:40px auto 0;padding:0 24px}
    .carousel-container{display:flex;align-items:center;justify-content:center;gap:20px;margin-bottom:16px}
    .carousel-btn-group{display:flex;gap:12px}
    .shared-carousel{position:relative;display:flex;flex:1;align-items:center;overflow:hidden;max-width:100%}
    .carousel-slides{display:flex;gap:20px;scroll-behavior:smooth;overflow-x:auto;scroll-snap-type:x mandatory;padding:20px 0;-webkit-overflow-scrolling:touch;width:100%;cursor:grab}
    .carousel-slides:active{cursor:grabbing}
    .carousel-slides::-webkit-scrollbar{height:6px}
    .carousel-slides::-webkit-scrollbar-track{background:#f0f0f0;border-radius:10px}
    .carousel-slides::-webkit-scrollbar-thumb{background:#c63b6a;border-radius:10px}
    .share-card{flex:0 0 calc(100% - 40px);max-width:500px;background:white;border-radius:16px;padding:28px;box-shadow:0 10px 30px rgba(123,15,47,0.1);border:2px solid #f3e6ea;scroll-snap-align:start;user-select:none}
    .card-header{font-family:'Playfair Display',serif;font-size:18px;color:#7b0f2f;font-weight:700;margin-bottom:16px;padding-bottom:12px;border-bottom:2px solid #ffd6e0}
    .card-content{color:#555;line-height:1.6;font-size:15px}
    .card-content p{margin:8px 0}
    .carousel-btn{background:linear-gradient(135deg, #c63b6a, #e85a8a);color:white;border:none;width:48px;height:48px;border-radius:50%;cursor:pointer;font-size:20px;font-weight:700;transition:all 0.3s;box-shadow:0 4px 12px rgba(198,59,106,0.3);display:flex;align-items:center;justify-content:center;flex-shrink:0}
    .carousel-btn:hover{background:linear-gradient(135deg, #a52f55, #c63b6a);transform:scale(1.1)}
    .carousel-btn:active{transform:scale(0.95)}
    .carousel-counter{text-align:center;color:#8a6b7c;font-size:13px;font-weight:600;margin-top:16px}
    
    /* Tablet: 1200px and below */
    @media (max-width:1200px){
      body{padding:24px 16px}
      .topbar{font-size:14px}
      .content-wrap{grid-template-columns:1fr;gap:24px;max-width:800px}
      .portrait-section{order:2}
      .final-section{order:1;padding:32px}
      .final-section h1{font-size:28px}
      .question-text{font-size:16px}
      .option-btn{padding:14px 18px;font-size:15px}
      .modal .card{width:90%;max-width:420px;padding:24px}
      .modal h3{font-size:24px}
      .flower-container{width:460px;height:580px;padding:24px}
      .flower-header-name{font-size:24px}
      .flower-header-text1{font-size:12px}
      .flower-header-text2{font-size:14px}
      .flower-petals{width:280px;height:260px}
      .center-heart{font-size:50px}
      .carousel-container{gap:16px}
      .carousel-btn{width:44px;height:44px;font-size:18px}
      .share-card{max-width:450px}
    }
    
    /* Mobile: 768px and below */
    @media (max-width:768px){
      body{padding:16px 12px}
      .topbar{gap:8px;margin-bottom:16px}
      .back{font-size:13px}
      .content-wrap{gap:12px}
      .portrait-container{max-width:100%;margin:0 0 16px}
      .portrait-container img{max-width:100%}
      .final-section{padding:24px;border-radius:14px}
      .final-section h1{font-size:22px;margin-bottom:4px}
      .final-emoji{font-size:24px;margin-bottom:12px}
      .question-text{font-size:15px;margin:16px 0 24px}
      .options{gap:10px}
      .option-btn{padding:12px 14px;font-size:14px;border-radius:10px}
      .modal{padding:16px}
      .modal .card{width:95%;max-width:360px;padding:20px;border-radius:14px}
      .modal h3{font-size:22px;margin-bottom:10px}
      .modal p{font-size:14px}
      .modal img{max-width:240px;margin:16px 0}
      .close-btn{padding:10px 16px;font-size:13px;margin-top:12px}
      .video-card{border-radius:12px}
      .video-header{padding:16px;font-size:16px}
      .video-close{font-size:20px}
      .flower-container{width:calc(100vw - 32px);max-width:420px;height:auto;min-height:500px;padding:20px;border-radius:20px}
      .flower-header{margin-bottom:10px}
      .flower-header-name{font-size:22px;margin-bottom:2px}
      .flower-header-text1{font-size:11px;margin:2px 0}
      .flower-header-text2{font-size:13px;margin-top:2px;letter-spacing:1.5px}
      .flower-petals{width:240px;height:220px;margin:8px 0}
      .petal-text{font-size:8px;padding:3px 6px}
      .center-heart{font-size:45px;width:60px;height:60px}
      .flower-stem{width:5px;height:100px}
      .flower-buttons{margin-top:10px}
      .accept-btn{padding:9px 24px;font-size:13px;border-radius:9px}
      .carousel-container{gap:12px;margin-bottom:12px}
      .carousel-btn{width:40px;height:40px;font-size:16px}
      .share-card{max-width:100%;flex:0 0 calc(100% - 24px)}
      .card-header{font-size:16px}
      .card-content{font-size:14px}
      .carousel-counter{font-size:12px}
    }
    
    /* Small Mobile: 480px and below */
    @media (max-width:480px){
      body{padding:12px 8px}
      .topbar{flex-direction:column;gap:6px;margin-bottom:12px}
      .back{font-size:12px}
      .content-wrap{gap:8px}
      .final-section{padding:18px;border-radius:12px}
      .final-section h1{font-size:20px}
      .final-emoji{font-size:22px;margin-bottom:8px}
      .question-text{font-size:14px;margin:12px 0 18px;line-height:1.5}
      .options{gap:8px}
      .option-btn{padding:11px 12px;font-size:13px;border-radius:8px}
      .modal .card{width:96%;max-width:100%;padding:18px;border-radius:12px}
      .modal h3{font-size:20px;margin-bottom:8px}
      .modal p{font-size:13px}
      .modal img{max-width:200px}
      .close-btn{padding:9px 14px;font-size:12px}
      .flower-container{width:calc(100vw - 24px);max-width:380px;min-height:480px;padding:16px;border-radius:16px}
      .flower-header-name{font-size:20px}
      .flower-header-text1{font-size:10px}
      .flower-header-text2{font-size:12px}
      .flower-petals{width:220px;height:200px}
      .petal-text{font-size:7px;padding:3px 5px}
      .center-heart{font-size:40px;width:50px;height:50px}
      .flower-stem{width:4px;height:80px}
      .accept-btn{padding:8px 20px;font-size:12px}
      .shared-carousel-wrap{margin:30px auto 0;padding:0 8px}
      .carousel-container{gap:10px;flex-wrap:wrap}
      .shared-carousel{width:100%}
      .share-card{padding:20px;border-radius:12px;max-width:100%;flex:0 0 calc(100% - 16px)}
      .card-header{font-size:14px;margin-bottom:12px}
      .card-content{font-size:13px;line-height:1.5}
      .carousel-btn{width:36px;height:36px;font-size:14px}
      .carousel-counter{font-size:11px;margin-top:12px}
    }
  </style>
</head>
<body>
  <div class="topbar">
    <a href="game.html" class="back">‚Üê Back to Quiz</a>
    <div style="flex:1"></div>
    <a href="index.html" class="back" style="color:#c63b6a">üè† Home</a>
  </div>

  <div class="content-wrap">
    <!-- Left: Portrait -->
    <div class="portrait-section">
      <div class="portrait-container">
        <img src="images/A1-removebg-preview.png" alt="Your portrait" />
      </div>
    </div>

    <!-- Right: Final Question -->
    <div class="final-section">
      <div class="final-emoji">üíñ</div>
      <h1>Final Question</h1>
      <p class="question-text">Will you be my Valentine?</p>
      <div class="options">
        <button class="option-btn" onclick="selectOption('A')">A) Yes üíò</button>
        <button class="option-btn" onclick="selectOption('B')">B) I'd love to üòç</button>
        <button class="option-btn" onclick="selectOption('C')">C) Let's see where this goes üòâ</button>
        <button class="option-btn" onclick="selectOption('D')">D) No</button>
      </div>
    </div>
  </div>

  <!-- Shared Carousel Section -->
  <div class="shared-carousel-wrap">
    <h2 style="text-align:center;color:#7b0f2f;font-family:'Playfair Display',serif;margin:0 0 16px">üíï Our Love Story - Cricket & Romance üèè</h2>
    <div class="carousel-container">
      <button class="carousel-btn" onclick="shareCarouselMove(-1)" title="Previous">‚ùÆ</button>
      <div class="shared-carousel">
        <div class="carousel-slides" id="carouselSlides">
        <!-- English Cards -->
        <div class="share-card">
          <div class="card-header">üèè English</div>
          <div class="card-content">
            <p><strong>Love with you feels like Test cricket,</strong></p>
            <p>No rush, no shortcuts ‚Äî just trust, patience, and forever.</p>
            <p>I don't want quick runs,</p>
            <p>I want a lifetime partnership at the crease‚Ä¶ with you.</p>
          </div>
        </div>
        <div class="share-card">
          <div class="card-header">üèè English</div>
          <div class="card-content">
            <p><strong>Every match has pressure, every innings has lows,</strong></p>
            <p>But with you on the other end,</p>
            <p>I know we'll bat through everything ‚Äî</p>
            <p>Session by session, life by life.</p>
          </div>
        </div>
        <div class="share-card">
          <div class="card-header">üèè English</div>
          <div class="card-content">
            <p><strong>I don't want to play alone anymore.</strong></p>
            <p>I want a partner who runs with me,</p>
            <p>Waits for me,</p>
            <p>And stays till the last ball of life.</p>
          </div>
        </div>
        <div class="share-card">
          <div class="card-header">üèè English</div>
          <div class="card-content">
            <p><strong>This isn't a T20 love.</strong></p>
            <p>This is a Test match heart ‚Äî</p>
            <p>Slow, deep, and meant to last forever.</p>
          </div>
        </div>
        
        <!-- Hindi Cards -->
        <div class="share-card">
          <div class="card-header">üèè ‡§π‡§ø‡§Ç‡§¶‡•Ä</div>
          <div class="card-content">
            <p><strong>Pyaar agar cricket hota,</strong></p>
            <p>Toh main Test match chunta,</p>
            <p>Kyunki tumhaare saath</p>
            <p>Main sirf jeetna nahi‚Ä¶</p>
            <p>Zindagi bhar saath khelna chahta hoon ‚ù§Ô∏è</p>
          </div>
        </div>
        <div class="share-card">
          <div class="card-header">üèè ‡§π‡§ø‡§Ç‡§¶‡•Ä</div>
          <div class="card-content">
            <p><strong>Har innings mushkil hoti hai,</strong></p>
            <p>Har match perfect nahi hota,</p>
            <p>Par jab doosre end par tum ho,</p>
            <p>Toh har pressure aasaan lagta hai.</p>
          </div>
        </div>
        <div class="share-card">
          <div class="card-header">üèè ‡§π‡§ø‡§Ç‡§¶‡•Ä</div>
          <div class="card-content">
            <p><strong>Mujhe chhoti innings nahi chahiye,</strong></p>
            <p>Mujhe woh partner chahiye</p>
            <p>Jo last ball tak crease na chhode‚Ä¶</p>
            <p>Aur woh tum ho üí´</p>
          </div>
        </div>
        <div class="share-card">
          <div class="card-header">üèè ‡§π‡§ø‡§Ç‡§¶‡•Ä</div>
          <div class="card-content">
            <p><strong>Yeh naya match nahi,</strong></p>
            <p>Yeh nayi zindagi ki shuruaat hai,</p>
            <p>Aur main chahta hoon</p>
            <p>Is match ka opening partner sirf tum ho ‚ù§Ô∏è</p>
          </div>
        </div>

        <!-- Punjabi Cards -->
        <div class="share-card">
          <div class="card-header">üèè ‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</div>
          <div class="card-content">
            <p><strong>Ishq mere layi T20 nahi,</strong></p>
            <p>Test match ae ‚Äî sabar, bharosa te saath.</p>
            <p>Je tu mere naal crease te ae,</p>
            <p>Ta zindagi di koi ball mushkil nahi üèè‚ù§Ô∏è</p>
          </div>
        </div>
        <div class="share-card">
          <div class="card-header">üèè ‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</div>
          <div class="card-content">
            <p><strong>Har match jeetna zaroori nahi,</strong></p>
            <p>Par partner sahi hona zaroori ae.</p>
            <p>Te main chaahunda haan</p>
            <p>Zindagi da har over tere naal khedan üí´</p>
          </div>
        </div>
        <div class="share-card">
          <div class="card-header">üèè ‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</div>
          <div class="card-content">
            <p><strong>Tu mere layi sirf pyaar nahi,</strong></p>
            <p>Tu meri opening partnership ae ‚Äî</p>
            <p>Jithe shuruaat vi tu,</p>
            <p>Te anjaam vi tu ‚ù§Ô∏è</p>
          </div>
        </div>
        <div class="share-card">
          <div class="card-header">üèè ‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</div>
          <div class="card-content">
            <p><strong>Je zindagi cricket ae,</strong></p>
            <p>Ta main sirf ik hi team chunn di haan ‚Äî</p>
            <p>Tu, main, te zindagi bhar da match ü´∂</p>
          </div>
        </div>
        </div>
      </div>
      <button class="carousel-btn" onclick="shareCarouselMove(1)" title="Next">‚ùØ</button>
    </div>
    <div class="carousel-counter" id="shareCounter">1 / 12</div>
  </div>

  <!-- Wrong Answer Modal (No) -->
  <div class="modal" id="wrongModal">
    <div class="card">
      <h3>Waah shampy Wahh üòè</h3>
      <p>Try again ‚Äî Wrong selection!</p>
      <img src="images/waah shampy waah.jpg" alt="wrong answer" />
      <button class="close-btn" onclick="closeWrongModal()">Understood!</button>
      <button class="close-btn" onclick="goHome()" style="background:#6b6b6b;margin-left:8px">üè† Go Home</button>
    </div>
  </div>

  <!-- Video Modal -->
  <div class="video-modal" id="videoModal">
    <div class="video-card">
      <div class="video-header">
        <span>Now Playing...</span>
        <button class="video-close" onclick="closeVideoModal()">‚úï</button>
      </div>
      <div class="video-frame" id="videoFrame"></div>
    </div>
  </div>

  <!-- Flower Bouquet Modal (for Yes) -->
  <div class="flower-modal" id="flowerModal">
    <div class="flower-container">
      <div class="flower-header">
        <div class="flower-header-name" id="recipientName"></div>
        <div class="flower-header-text1">Ayeeee Cutieee Kr hi di YES FR üíï</div>
        <div class="flower-header-text2">Uff</div>
      </div>
      <div class="flower-petals" id="flowerPetals">
        <div class="center-heart">üíï</div>
      </div>
      <div class="flower-stem"></div>
      <div class="flower-buttons">
        <button class="accept-btn" onclick="acceptFlower()">üéâ Accept üíê</button>
      </div>
    </div>
  </div>

  <script>
    const videoFiles = {
      'A': 'videos/YTDown.com_YouTube_DIL-OFFCIAL-VIDEO-NINJA-FT-SARA-GURPAL-L_Media_SgiXvLBTm8I_001_1080p (1).mp4',
      'B': 'videos/YTDown.com_YouTube_ENNA-KHUSH-RAKHUNGA-Full-Song-SUCHAYAAR-_Media_P96wpAJEJXw_001_1080p (2).mp4',
      'C': 'videos/YTDown.com_YouTube_Mohabbat-B-Praak-Gurnam-Bhullar-Isha-Mal_Media_HYzwCiIsrHs_001_1080p (1).mp4'
    };

    let selectedChoice = '';

    function selectOption(choice){
      if(choice === 'D'){
        document.getElementById('wrongModal').classList.add('show');
      } else if(choice === 'A'){
        selectedChoice = 'A';
        createFlowerBouquet();
      } else if(['B', 'C'].includes(choice)){
        playVideo(choice);
      }
    }

    function createFlowerBouquet(){
      const petals = document.getElementById('flowerPetals');
      petals.innerHTML = '';
      
      // Get respondent name from sessionStorage (passed from game.html)
      const respondentName = sessionStorage.getItem('respondentName') || 'My Love';
      document.getElementById('recipientName').textContent = respondentName;
      
      // Get quiz answer words from sessionStorage
      let quizAnswerWords = [];
      try {
        const stored = sessionStorage.getItem('quizAnswerWords');
        if(stored) {
          quizAnswerWords = JSON.parse(stored).filter(w => w.length > 0);
        }
      } catch(e) {
        console.warn('Could not retrieve quiz answers');
      }
      
      // Base romantic words pool
      const romanticWords = ['Yes', 'Forever', 'Always', 'Love', 'You', 'Mine', 'Dreams', 'Smile', 'Joy', 'Hope', 'Heart', 'Beautiful', 'Kiss', 'Hold'];
      
      // Create separate arrays for quiz and filler words
      const wordArray = [];
      const quizWordList = [];
      const fillerWordList = [];
      
      // Build quiz word list (85-90 appearances)
      if(quizAnswerWords.length > 0) {
        const uniqueAnswerWords = [...new Set(quizAnswerWords)];
        for(let i = 0; i < Math.ceil(85 / uniqueAnswerWords.length); i++) {
          uniqueAnswerWords.forEach(word => {
            quizWordList.push({text: word, isQuizWord: true});
          });
        }
      }
      
      // Build filler word list
      while(fillerWordList.length < 30) {
        romanticWords.forEach(word => {
          if(fillerWordList.length < 30) {
            fillerWordList.push({text: word, isQuizWord: false});
          }
        });
      }
      
      // STRATEGY: Put quiz words in inner rings (top/visible), fillers in outer rings
      // Inner core (12 words) - ALL QUIZ WORDS
      for(let i = 0; i < 12 && i < quizWordList.length; i++) {
        wordArray.push(quizWordList[i]);
      }
      
      // Inner ring (24 words) - MOSTLY QUIZ WORDS (20) + few fillers (4)
      for(let i = 0; i < 20 && i + 12 < quizWordList.length; i++) {
        wordArray.push(quizWordList[i + 12]);
      }
      for(let i = 0; i < 4; i++) {
        wordArray.push(fillerWordList[i]);
      }
      
      // Middle ring (36 words) - REST OF QUIZ + MORE FILLERS
      const remainingQuiz = quizWordList.slice(32);
      for(let i = 0; i < remainingQuiz.length && wordArray.length < 72; i++) {
        wordArray.push(remainingQuiz[i]);
      }
      while(wordArray.length < 72) {
        fillerWordList.forEach(word => {
          if(wordArray.length < 72) {
            wordArray.push(word);
          }
        });
      }
      
      // Outer ring (48 words) - FILL WITH FILLERS
      while(wordArray.length < 120) {
        fillerWordList.forEach(word => {
          if(wordArray.length < 120) {
            wordArray.push(word);
          }
        });
      }
      
      // Trim to exactly 120
      wordArray.length = 120;
      
      let wordIndex = 0;
      
      // Create flower with concentric rings of words
      const rings = [
        {radius: 30, count: 12, fontSize: 10, delay: 0},       // Inner core - 12 quiz words at TOP
        {radius: 55, count: 24, fontSize: 9, delay: 0.02},     // Inner ring - 20 quiz words VISIBLE
        {radius: 85, count: 36, fontSize: 8, delay: 0.04},     // Middle ring
        {radius: 115, count: 48, fontSize: 8, delay: 0.06}     // Outer ring
      ];
      
      rings.forEach(ring => {
        for(let i = 0; i < ring.count; i++){
          const angle = (i / ring.count) * Math.PI * 2;
          const x = Math.cos(angle) * ring.radius;
          const y = Math.sin(angle) * ring.radius;
          
          const wordObj = wordArray[wordIndex % wordArray.length];
          const petal = document.createElement('div');
          petal.className = 'petal-text' + (wordObj.isQuizWord ? ' quiz-word' : '');
          petal.textContent = wordObj.text;
          petal.style.left = `calc(50% + ${x}px)`;
          petal.style.top = `calc(50% + ${y}px)`;
          petal.style.transform = `translate(-50%, -50%)`;
          petal.style.animationDelay = `${ring.delay + (i * 0.01)}s`;
          petal.style.whiteSpace = 'nowrap';
          petals.appendChild(petal);
          wordIndex++;
        }
      });
      
      document.getElementById('flowerModal').classList.add('show');
    }

    function acceptFlower(){
      document.getElementById('flowerModal').classList.remove('show');
      playVideo('A');
    }

    function closeWrongModal(){
      document.getElementById('wrongModal').classList.remove('show');
    }

    function playVideo(choice){
      const videoFile = videoFiles[choice];
      if(videoFile){
        const videoFrame = document.getElementById('videoFrame');
        videoFrame.innerHTML = `<video controls autoplay><source src="${videoFile}" type="video/mp4">Your browser doesn't support HTML5 video.</video>`;
        document.getElementById('videoModal').classList.add('show');
      }
    }

    function closeVideoModal(){
      document.getElementById('videoModal').classList.remove('show');
      document.getElementById('videoFrame').innerHTML = '';
    }

    function goHome(){
      window.location.href = 'index.html';
    }    
    
    let shareCarouselIndex = 0;
    const totalShareCards = 12;
    let isDragging = false;
    let startX = 0;
    let scrollStart = 0;
    
    function shareCarouselMove(direction) {
        const slides = document.getElementById('carouselSlides');
        const cards = document.querySelectorAll('.share-card');
        
        if(cards.length === 0) return;
        
        shareCarouselIndex += direction;
        
        // Loop around
        if (shareCarouselIndex >= totalShareCards) {
            shareCarouselIndex = 0;
        } else if (shareCarouselIndex < 0) {
            shareCarouselIndex = totalShareCards - 1;
        }
        
        // Scroll to the current card
        const cardWidth = cards[0].offsetWidth + 20; // 20px gap
        slides.scrollLeft = shareCarouselIndex * cardWidth;
        
        // Update counter
        document.getElementById('shareCounter').textContent = (shareCarouselIndex + 1) + ' / ' + totalShareCards;
    }
    
    // Drag and swipe functionality
    const carouselSlides = document.getElementById('carouselSlides');
    
    carouselSlides.addEventListener('mousedown', (e) => {
        isDragging = true;
        startX = e.pageX;
        scrollStart = carouselSlides.scrollLeft;
        carouselSlides.style.scrollBehavior = 'auto';
    });
    
    document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        const walk = (e.pageX - startX) * 1.5;
        carouselSlides.scrollLeft = scrollStart - walk;
    });
    
    document.addEventListener('mouseup', () => {
        isDragging = false;
        carouselSlides.style.scrollBehavior = 'smooth';
        updateCarouselCounter();
    });
    
    carouselSlides.addEventListener('touchstart', (e) => {
        isDragging = true;
        startX = e.touches[0].clientX;
        scrollStart = carouselSlides.scrollLeft;
        carouselSlides.style.scrollBehavior = 'auto';
    }, false);
    
    document.addEventListener('touchmove', (e) => {
        if (!isDragging) return;
        const walk = (e.touches[0].clientX - startX) * 1.5;
        carouselSlides.scrollLeft = scrollStart - walk;
    }, false);
    
    document.addEventListener('touchend', () => {
        isDragging = false;
        carouselSlides.style.scrollBehavior = 'smooth';
        updateCarouselCounter();
    });
    
    function updateCarouselCounter() {
        const slides = document.getElementById('carouselSlides');
        const cards = document.querySelectorAll('.share-card');
        if(cards.length === 0) return;
        
        const cardWidth = cards[0].offsetWidth + 20;
        const currentIndex = Math.round(slides.scrollLeft / cardWidth);
        shareCarouselIndex = Math.min(currentIndex, totalShareCards - 1);
        document.getElementById('shareCounter').textContent = (shareCarouselIndex + 1) + ' / ' + totalShareCards;
    }  </script>
</body>
</html>

